# Исправление ошибки форматирования в системе мониторинга

## Проблема
```
2025-06-10 18:58:00,559 - toolbot.services.monitoring - ERROR - Ошибка в мониторинге: argument 1 (impossible<bad format char>)
```

## Причина
Ошибка возникала из-за использования f-строк для логирования исключений, которые могли содержать символ `%`. В Windows пути диска (`C:\`) и некоторые системные сообщения могут содержать символы, конфликтующие с форматированием строк Python.

## Исправления

### 1. Безопасное логирование исключений
**Файл:** `toolbot/services/monitoring.py`

**Было:**
```python
logger.error(f"Ошибка в мониторинге: {e}")
logger.error(f"Ошибка получения GPU метрик: {e}")
logger.error(f"Ошибка получения PyTorch GPU метрик: {e}")
```

**Стало:**
```python
logger.error("Ошибка в мониторинге: %s", str(e))
logger.error("Ошибка получения GPU метрик: %s", str(e))
logger.error("Ошибка получения PyTorch GPU метрик: %s", str(e))
```

### 2. Правильное определение пути диска для Windows
**Было:**
```python
disk = psutil.disk_usage('/')  # Ошибка на Windows
```

**Стало:**
```python
try:
    import platform
    disk_path = 'C:\\' if platform.system() == 'Windows' else '/'
    disk = psutil.disk_usage(disk_path)
    # ... обработка данных диска
except Exception as e:
    logger.error("Ошибка получения информации о диске: %s", str(e))
    metrics['disk'] = {
        'total_gb': 0,
        'used_gb': 0, 
        'free_gb': 0,
        'usage_percent': 0
    }
```

## Результат
✅ Система мониторинга работает без ошибок форматирования  
✅ Корректно определяется путь диска на Windows  
✅ Все исключения логируются безопасно  
✅ Мониторинг продолжает работу даже при ошибках отдельных компонентов  

## Тестирование
Система прошла полное тестирование:
- ✅ Сбор метрик CPU, памяти, диска, сети
- ✅ Автоматический мониторинг в фоновом режиме  
- ✅ Real-time дашборд
- ✅ Обработка ошибок без сбоев

Теперь бот может работать без ошибок мониторинга в журналах. 