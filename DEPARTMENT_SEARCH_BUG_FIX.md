# üêõ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ü—Ä–æ–±–ª–µ–º–∞ —Å –ø–æ–∏—Å–∫–æ–º –ø–æ –æ—Ç–¥–µ–ª–∞–º

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

**–°–∏–º–ø—Ç–æ–º:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–ª "–û–¢–î–ï–õ–û–ß–ù–´–ï –ú–ê–¢–ï–†–ò–ê–õ–´", –Ω–æ –ø–æ–ª—É—á–∞–ª —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–∑ "–í–û–î–û–°–ù–ê–ë–ñ–ï–ù–ò–Ø" –∏ –¥—Ä—É–≥–∏—Ö –æ—Ç–¥–µ–ª–æ–≤.

**–ü—Ä–∏—á–∏–Ω–∞:** –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤—ã–±–æ—Ä–∞ –æ—Ç–¥–µ–ª–æ–≤ –ù–ï –±—ã–ª–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω—ã –≤ –≥–ª–∞–≤–Ω–æ–º —Ñ–∞–π–ª–µ `main.py`.

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### 1. –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤
```
bot.log:112349 - üìÇ –í—ã–±—Ä–∞–Ω–Ω—ã–π –æ—Ç–¥–µ–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º: ''
bot.log:112350 - üè∑Ô∏è –°–∏—Å—Ç–µ–º–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –æ—Ç–¥–µ–ª–∞: '–í–°–ï'
bot.log:112351 - üîç –ù–∞—á–∏–Ω–∞–µ–º –ø–æ–∏—Å–∫ –ø–æ –æ—Ç–¥–µ–ª—É: '–í–°–ï'
```

**–ü—Ä–æ–±–ª–µ–º–∞:** `selected_department` –±—ã–ª –ø—É—Å—Ç, –ø–æ—ç—Ç–æ–º—É –ø–æ–∏—Å–∫ —à–µ–ª –ø–æ –≤—Å–µ–º –æ—Ç–¥–µ–ª–∞–º.

### 2. –ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞
–í `main.py` –±—ã–ª —Ç–æ–ª—å–∫–æ –æ–±—â–∏–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫:
```python
# ‚ùå –ü–†–û–ë–õ–ï–ú–ê: –õ–æ–≤–∏—Ç –í–°–ï —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
application.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, handle_text_message))
```

–ù–æ –ù–ï –±—ã–ª–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –æ—Ç–¥–µ–ª–æ–≤:
- `department_selection_handler` - –ù–ï –ø–æ–¥–∫–ª—é—á–µ–Ω
- `photo_search_handler` - –ù–ï –ø–æ–¥–∫–ª—é—á–µ–Ω

### 3. –õ–æ–≥–∏–∫–∞ –æ—à–∏–±–∫–∏
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç "üè† –û–¢–î–ï–õ–û–ß–ù–´–ï –ú–ê–¢–ï–†–ò–ê–õ–´"
2. –°–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ `handle_text_message` (–æ–±—â–∏–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫)
3. –û—Ç–¥–µ–ª –ù–ï —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `context.user_data`
4. –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ñ–æ—Ç–æ `selected_department` –ø—É—Å—Ç
5. –ö–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `DEPARTMENTS.get(selected_department, "–í–°–ï")` ‚Üí `"–í–°–ï"`
6. –ü–æ–∏—Å–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ –≤—Å–µ–º –æ—Ç–¥–µ–ª–∞–º

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### 1. –ü–æ–¥–∫–ª—é—á–µ–Ω—ã –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –æ—Ç–¥–µ–ª–æ–≤ –≤ `main.py`
```python
# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –î–æ–±–∞–≤–ª–µ–Ω—ã —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
application.add_handler(MessageHandler(filters.Text("üì∏ –ü–æ–∏—Å–∫ –ø–æ —Ñ–æ—Ç–æ"), photo_search_handler))
application.add_handler(MessageHandler(filters.Text("üîç –ü–æ–∏—Å–∫ –ø–æ –≤—Å–µ–º –æ—Ç–¥–µ–ª–∞–º"), department_selection_handler))
application.add_handler(MessageHandler(filters.Text("üõ†Ô∏è –ò–ù–°–¢–†–£–ú–ï–ù–¢–´"), department_selection_handler))
application.add_handler(MessageHandler(filters.Text("üé® –ö–†–ê–°–ö–ò"), department_selection_handler))
# ... –≤—Å–µ 15 –æ—Ç–¥–µ–ª–æ–≤
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `/start`
```python
# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –î–æ–±–∞–≤–ª–µ–Ω–æ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
keyboard = [
    ["üì∏ –ü–æ–∏—Å–∫ –ø–æ —Ñ–æ—Ç–æ"],
    ["üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ë–î", "‚ÑπÔ∏è –ü–æ–º–æ—â—å"]
]
```

### 3. –î–æ–±–∞–≤–ª–µ–Ω–æ –æ—Ç–ª–∞–¥–æ—á–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
```python
# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ department_selection_handler
logger.info(f"üè™ –í–´–ë–û–† –û–¢–î–ï–õ–ê –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º {update.effective_user.id}: '{selected_department}'")
logger.info(f"‚úÖ –°–û–•–†–ê–ù–ï–ù –æ—Ç–¥–µ–ª –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ: '{saved_department}'")

# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ handle_photo
if selected_department not in DEPARTMENTS and selected_department != "üîç –ü–æ–∏—Å–∫ –ø–æ –≤—Å–µ–º –æ—Ç–¥–µ–ª–∞–º":
    logger.warning(f"‚ö†Ô∏è –ü–†–û–ë–õ–ï–ú–ê: –û—Ç–¥–µ–ª '{selected_department}' –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ —Å–ª–æ–≤–∞—Ä–µ DEPARTMENTS!")
```

## üéØ –¢–µ–ø–µ—Ä—å –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫:
1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:** –ù–∞–∂–∏–º–∞–µ—Ç `/start`
2. **–ë–æ—Ç:** –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é —Å –∫–Ω–æ–ø–∫–æ–π "üì∏ –ü–æ–∏—Å–∫ –ø–æ —Ñ–æ—Ç–æ"
3. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:** –ù–∞–∂–∏–º–∞–µ—Ç "üì∏ –ü–æ–∏—Å–∫ –ø–æ —Ñ–æ—Ç–æ"
4. **–ë–æ—Ç:** `photo_search_handler` ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—Ç–¥–µ–ª—ã
5. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:** –í—ã–±–∏—Ä–∞–µ—Ç "üè† –û–¢–î–ï–õ–û–ß–ù–´–ï –ú–ê–¢–ï–†–ò–ê–õ–´"
6. **–ë–æ—Ç:** `department_selection_handler` ‚Üí —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ `context.user_data["selected_department"]`
7. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:** –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–æ—Ç–æ
8. **–ë–æ—Ç:** `handle_photo` ‚Üí –ø–æ–ª—É—á–∞–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–π –æ—Ç–¥–µ–ª ‚Üí –ø–æ–∏—Å–∫ —Ç–æ–ª—å–∫–æ –≤ —ç—Ç–æ–º –æ—Ç–¥–µ–ª–µ ‚úÖ

### –õ–æ–≥–∏ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```
üè™ –í–´–ë–û–† –û–¢–î–ï–õ–ê –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º 12345: 'üè† –û–¢–î–ï–õ–û–ß–ù–´–ï –ú–ê–¢–ï–†–ò–ê–õ–´'
‚úÖ –°–û–•–†–ê–ù–ï–ù –æ—Ç–¥–µ–ª –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ: 'üè† –û–¢–î–ï–õ–û–ß–ù–´–ï –ú–ê–¢–ï–†–ò–ê–õ–´'
üìÇ –í—ã–±—Ä–∞–Ω–Ω—ã–π –æ—Ç–¥–µ–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º: 'üè† –û–¢–î–ï–õ–û–ß–ù–´–ï –ú–ê–¢–ï–†–ò–ê–õ–´'
üè∑Ô∏è –°–∏—Å—Ç–µ–º–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –æ—Ç–¥–µ–ª–∞: '–û–¢–î–ï–õ–û–ß–ù–´–ï –ú–ê–¢–ï–†–ò–ê–õ–´'
üîç –ù–∞—á–∏–Ω–∞–µ–º –ø–æ–∏—Å–∫ –ø–æ –æ—Ç–¥–µ–ª—É: '–û–¢–î–ï–õ–û–ß–ù–´–ï –ú–ê–¢–ï–†–ò–ê–õ–´'
üéØ –û—Ç–¥–µ–ª –¥–ª—è API –ø–æ–∏—Å–∫–∞: –û–¢–î–ï–õ–û–ß–ù–´–ï –ú–ê–¢–ï–†–ò–ê–õ–´
```

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ **–ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞:** –¢–µ–ø–µ—Ä—å –ø–æ–∏—Å–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å—Ç—Ä–æ–≥–æ –≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–º –æ—Ç–¥–µ–ª–µ  
‚úÖ **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç:** –û—Ç–¥–µ–ª–æ—á–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã ‚Üí —Ç–æ–ª—å–∫–æ –æ—Ç–¥–µ–ª–æ—á–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã  
‚úÖ **–õ–æ–≥–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã:** –ü–æ–ª–Ω–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤—ã–±–æ—Ä–∞ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –æ—Ç–¥–µ–ª–∞  
‚úÖ **UX —É–ª—É—á—à–µ–Ω:** –£–¥–æ–±–Ω–æ–µ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é —Å –∫–Ω–æ–ø–∫–∞–º–∏  

## üöÄ –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞: `python main.py`
2. –ù–∞–∂–º–∏—Ç–µ `/start`
3. –í—ã–±–µ—Ä–∏—Ç–µ "üì∏ –ü–æ–∏—Å–∫ –ø–æ —Ñ–æ—Ç–æ"
4. –í—ã–±–µ—Ä–∏—Ç–µ –ª—é–±–æ–π –æ—Ç–¥–µ–ª (–Ω–∞–ø—Ä–∏–º–µ—Ä, "üè† –û–¢–î–ï–õ–û–ß–ù–´–ï –ú–ê–¢–ï–†–ò–ê–õ–´")
5. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ñ–æ—Ç–æ
6. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã - –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –∏–∑ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –æ—Ç–¥–µ–ª–∞

**–ü—Ä–æ–±–ª–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞! üéâ** 